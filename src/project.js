window.__require=function t(i,e,s){function n(c,a){if(!e[c]){if(!i[c]){var h=c.split("/");if(h=h[h.length-1],!i[h]){var r="function"==typeof __require&&__require;if(!a&&r)return r(h,!0);if(o)return o(h,!0);throw new Error("Cannot find module '"+c+"'")}}var u=e[c]={exports:{}};i[c][0].call(u.exports,function(t){return n(i[c][1][t]||t)},u,u.exports,t,i,e,s)}return e[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<s.length;c++)n(s[c]);return n}({boom:[function(t,i,e){"use strict";function s(){var t=cc.scaleTo(.3,1.1,1.1),i=cc.scaleTo(.3,1,1);return cc.repeatForever(cc.sequence(t,i))}function n(){var t=this.game.player.getPosition();return this.node.position.sub(t).mag()}function o(){this.game.gameOver()}function c(){this.game.despawnBoom(this.node)}cc._RF.push(i,"5a969lRJVBIEKDQt6sHY9KM","boom"),cc.Class({extends:cc.Component,properties:{pickRadius:cc.Integer},reuse:function(t){this.game=t,this.enabled=!0,this.node.opacity=255},onLoad:function(){this.game={},this.enabled=!1,this.setScaleAction=s.bind(this),this.despawn=c.bind(this),this.getPlayerDistance=n.bind(this),this.onPicked=o.bind(this),this.node.runAction(this.setScaleAction())},update:function(t){this.getPlayerDistance()<this.pickRadius?this.onPicked():this.game.boomTimer>=this.game.boomDuration&&this.despawn()}}),cc._RF.pop()},{}],game:[function(t,i,e){"use strict";function s(){var t=null;t=this.starPool.size()>0?this.starPool.get(this):cc.instantiate(this.starPrefab),this.node.addChild(t),t.setPosition(o.call(this)),t.getComponent("star").reuse(this),this.starDuration=this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration),this.timer=0,this.currentStar=t}function n(t){this.starPool.put(t),this.spawnNewStar()}function o(){var t,i=this.groundY+Math.random()*this.player.getComponent("player").jumpHeight+50,e=this.node.width/2;return t=2*(Math.random()-.5)*e,cc.v2(t,i)}function c(){var t=null;t=this.boomPool.size()>0?this.boomPool.get(this):cc.instantiate(this.boomPrefab),this.node.addChild(t),t.setPosition(h.call(this)),t.getComponent("boom").reuse(this),this.boomDuration=this.minStarDuration+Math.random()*(this.maxStarDuration-this.minStarDuration),this.boomTimer=0,this.currentBoom=t}function a(t){this.boomPool.put(t),this.spawnNewBoom()}function h(){var t,i=this.groundY+Math.random()*this.player.getComponent("player").jumpHeight+50,e=this.node.width/2;return t=2*(Math.random()-.5)*e,cc.v2(t,i)}function r(){var t;return this.animPool.size()>0?t=this.animPool.get(this):(t=cc.instantiate(this.animRootPrefab)).getComponent("scoreAnim").reuse(this),t}function u(){this.animPool.put(this.currentAnimRoot)}function d(t){this.score+=1,this.updateScoreDisplay(),this.currentAnimRoot=this.spawnAnimRoot(),this.node.addChild(this.currentAnimRoot),this.currentAnimRoot.setPosition(t),this.currentAnimRoot.getComponent(cc.Animation).play("score_pop"),cc.audioEngine.playEffect(this.scoreAudio,!1)}function p(){this.scoreDisplay.string="Score: "+this.score}function l(){this.enabled=!1,this.player.getComponent("player").stopHandler(),this.buttonDisplay.target.active=!0,this.currentStar.destroy(),this.currentBoom.destroy()}cc._RF.push(i,"1a127gwoTJHjYYi2knTcJ4W","game"),cc.Class({extends:cc.Component,properties:{starPrefab:{default:null,type:cc.Prefab},boomPrefab:{default:null,type:cc.Prefab},animRootPrefab:{default:null,type:cc.Prefab},maxStarDuration:0,minStarDuration:0,ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},scoreDisplay:{default:null,type:cc.Label},buttonDisplay:{default:null,type:cc.Button},scoreAudio:{default:null,type:cc.AudioClip}},onStartHandler:function(){this.enabled=!0,this.score=0,this.timer=0,this.starDuration=0,this.boomTimer=0,this.boomDuration=0,this.updateScoreDisplay(),this.buttonDisplay.target.active=!1,this.player.getComponent("player").startHandler(this.groundY),this.spawnNewStar(),this.spawnNewBoom()},onLoad:function(){this.spawnNewStar=s.bind(this),this.spawnNewBoom=c.bind(this),this.spawnAnimRoot=r.bind(this),this.despawnStar=n.bind(this),this.despawnBoom=a.bind(this),this.despawnAnimRoot=u.bind(this),this.gainScore=d.bind(this),this.updateScoreDisplay=p.bind(this),this.gameOver=l.bind(this),this.enabled=!1,this.score=0,this.timer=0,this.starDuration=0,this.boomTimer=0,this.boomDuration=0,this.groundY=this.ground.y+this.ground.height/2-10,this.currentStar=null,this.currentBoom=null,this.currentAnimRoot=null,this.starPool=new cc.NodePool("star"),this.boomPool=new cc.NodePool("boom"),this.animPool=new cc.NodePool("anim")},update:function(t){this.enabled&&(this.timer>this.starDuration?this.gameOver():(this.timer+=t,this.boomTimer+=t))}}),cc._RF.pop()},{}],player:[function(t,i,e){"use strict";function s(){var t=cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),i=cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),e=cc.scaleTo(this.squashDuration,1,.6),s=cc.scaleTo(this.squashDuration,1,1.2),n=cc.scaleTo(this.squashDuration,1,1),o=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(e,s,t,n,i,o))}function n(){cc.audioEngine.playEffect(this.jumpAudio,!1)}function o(t){switch(t.keyCode){case cc.macro.KEY.left:this.accLeft=this.isMoving=!0;break;case cc.macro.KEY.right:this.accRight=this.isMoving=!0}}function c(t){switch(t.keyCode){case cc.macro.KEY.left:this.accLeft=this.isMoving=!1;break;case cc.macro.KEY.right:this.accRight=this.isMoving=!1}}function a(t){t.getLocation().x>=cc.winSize.width/2?(this.accLeft=!1,this.accRight=!0):(this.accLeft=!0,this.accRight=!1)}function h(t){this.accLeft=!1,this.accRight=!1}cc._RF.push(i,"7fab81UWMhBn4xuaHNod36x","player"),cc.Class({extends:cc.Component,properties:{jumpHeight:{default:0,type:cc.Integer,displayName:"\u4e3b\u89d2\u8df3\u8dc3\u9ad8\u5ea6"},jumpDuration:{default:0,type:cc.Float,displayName:"\u4e3b\u89d2\u8df3\u8dc3\u6301\u7eed\u65f6\u95f4(\u79d2\uff09"},squashDuration:{default:0,type:cc.Float,displayName:"\u8f85\u52a9\u5f62\u53d8\u52a8\u4f5c\u65f6\u95f4(\u79d2\uff09"},maxMoveSpeed:{default:0,type:cc.Integer,displayName:"\u6700\u5927\u79fb\u52a8\u901f\u5ea6"},accel:{default:0,type:cc.Integer,displayName:"\u52a0\u901f\u5ea6"},jumpAudio:{default:null,type:cc.AudioClip}},startHandler:function(t){this.enabled=!0,this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.node.x=0,this.node.y=t,this.node.runAction(this.jumpAction)},stopHandler:function(){this.enabled=!1,this.node.stopAllActions()},onLoad:function(){this.setJumpAction=s.bind(this),this.playJumpSound=n.bind(this),this.onKeyDown=o.bind(this),this.onKeyUp=c.bind(this),this.onTouchStart=a.bind(this),this.onTouchEnd=h.bind(this),this.isMoving=!1,this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.enabled=!1,this.jumpAction=this.setJumpAction(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var t=cc.Canvas.instance.node;t.on("touchstart",this.onTouchStart,this),t.on("touchend",this.onTouchEnd,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);var t=cc.Canvas.instance.node;t.off("touchstart",this.onTouchStart,this),t.off("touchend",this.onTouchEnd,this)},update:function(t){this.enabled&&(this.accLeft?this.xSpeed-=this.accel*t:this.accRight&&(this.xSpeed+=this.accel*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t,this.node.x>this.node.parent.width/2?this.node.x=-this.node.parent.width/2:this.node.x<-this.node.parent.width/2&&(this.node.x=this.node.parent.width/2))}}),cc._RF.pop()},{}],scoreAnim:[function(t,i,e){"use strict";cc._RF.push(i,"ea4f3XETK5H9LVPOe+4tjQK","scoreAnim"),cc.Class({extends:cc.Component,reuse:function(t){this.game=t},despawn:function(){this.game.despawnAnimRoot()}}),cc._RF.pop()},{}],star:[function(t,i,e){"use strict";function s(){var t=this.game.player.getPosition();return this.node.position.sub(t).mag()}function n(){var t=this.node.getPosition();this.game.gainScore(t),this.game.despawnStar(this.node)}cc._RF.push(i,"5e5bfVJh2RHkI51HTJsB2ef","star"),cc.Class({extends:cc.Component,properties:{pickRadius:cc.Integer},reuse:function(t){this.game=t,this.enabled=!0,this.node.opacity=255},onLoad:function(){this.game={},this.enabled=!1,this.getPlayerDistance=s.bind(this),this.onPicked=n.bind(this)},update:function(t){if(this.getPlayerDistance()<this.pickRadius)this.onPicked();else{var i=1-this.game.timer/this.game.starDuration;this.node.opacity=50+Math.floor(205*i)}}}),cc._RF.pop()},{}]},{},["boom","game","player","scoreAnim","star"]);